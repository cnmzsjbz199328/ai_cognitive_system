<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‡½æ•°æµ‹è¯• - AIè®¤çŸ¥ç³»ç»Ÿ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        .test-section {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        
        .test-button {
            margin: 5px;
            padding: 10px 15px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .test-button:hover {
            background: linear-gradient(135deg, #2980b9, #1abc9c);
            transform: translateY(-2px);
        }
        
        .status {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .status.success {
            background: rgba(46, 204, 113, 0.3);
            color: #2ecc71;
        }
        
        .status.error {
            background: rgba(231, 76, 60, 0.3);
            color: #e74c3c;
        }
        
        .status.info {
            background: rgba(52, 152, 219, 0.3);
            color: #3498db;
        }
        
        .function-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .function-item {
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
        }
        
        .available {
            border-left: 4px solid #2ecc71;
        }
        
        .missing {
            border-left: 4px solid #e74c3c;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ§ª AIè®¤çŸ¥ç³»ç»Ÿå‡½æ•°æµ‹è¯•</h1>
        
        <div class="test-section">
            <h2>ğŸ“‹ å‡½æ•°å¯ç”¨æ€§æ£€æŸ¥</h2>
            <div id="function-status"></div>
            <button class="test-button" onclick="checkFunctions()">æ£€æŸ¥æ‰€æœ‰å‡½æ•°</button>
        </div>
        
        <div class="test-section">
            <h2>ğŸ® æ¨¡æ‹Ÿæ§åˆ¶æµ‹è¯•</h2>
            <button class="test-button" onclick="testStartSimulation()">æµ‹è¯•å¯åŠ¨æ¨¡æ‹Ÿ</button>
            <button class="test-button" onclick="testStopSimulation()">æµ‹è¯•åœæ­¢æ¨¡æ‹Ÿ</button>
            <button class="test-button" onclick="testResetSimulation()">æµ‹è¯•é‡ç½®æ¨¡æ‹Ÿ</button>
            <div id="simulation-status" class="status info">ç­‰å¾…æµ‹è¯•...</div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ”— è¿æ¥çº¿æ§åˆ¶æµ‹è¯•</h2>
            <button class="test-button" onclick="testToggleConnections()">æµ‹è¯•åˆ‡æ¢è¿æ¥çº¿</button>
            <button class="test-button" onclick="testToggleConnectionMode()">æµ‹è¯•åˆ‡æ¢è¿æ¥æ¨¡å¼</button>
            <button class="test-button" onclick="testToggleAnchorPoints()">æµ‹è¯•åˆ‡æ¢é”šç‚¹</button>
            <div id="connection-status" class="status info">ç­‰å¾…æµ‹è¯•...</div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ” ç³»ç»Ÿä¿¡æ¯</h2>
            <div id="system-info"></div>
            <button class="test-button" onclick="showSystemInfo()">æ˜¾ç¤ºç³»ç»Ÿä¿¡æ¯</button>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“Š å®æ—¶ç›‘æ§</h2>
            <div id="monitor-info"></div>
            <button class="test-button" onclick="startMonitoring()">å¼€å§‹ç›‘æ§</button>
            <button class="test-button" onclick="stopMonitoring()">åœæ­¢ç›‘æ§</button>
        </div>
    </div>

    <!-- ç®€åŒ–çš„æµ‹è¯•æ¨¡å— -->
    <div style="position: absolute; top: -1000px;">
        <div class="module" id="test-module" style="width: 100px; height: 50px;"></div>
    </div>

    <script type="module" src="js/main.js"></script>
    
    <script>
        let monitorInterval = null;

        // æ£€æŸ¥æ‰€æœ‰å‡½æ•°æ˜¯å¦å¯ç”¨
        function checkFunctions() {
            const functions = [
                'startSimulation',
                'stopSimulation', 
                'resetSimulation',
                'toggleConnections',
                'toggleConnectionMode',
                'toggleAnchorPoints'
            ];
            
            const statusDiv = document.getElementById('function-status');
            let html = '<div class="function-list">';
            let allAvailable = true;
            
            functions.forEach(funcName => {
                const isAvailable = typeof window[funcName] === 'function';
                const className = isAvailable ? 'available' : 'missing';
                const status = isAvailable ? 'âœ…' : 'âŒ';
                
                html += `<div class="function-item ${className}">${status} ${funcName}</div>`;
                
                if (!isAvailable) {
                    allAvailable = false;
                }
            });
            
            html += '</div>';
            
            if (allAvailable) {
                html += '<div class="status success">âœ… æ‰€æœ‰å‡½æ•°éƒ½å¯ç”¨ï¼</div>';
            } else {
                html += '<div class="status error">âŒ æœ‰å‡½æ•°ç¼ºå¤±ï¼Œè¯·æ£€æŸ¥æ¨¡å—åŠ è½½æƒ…å†µ</div>';
            }
            
            statusDiv.innerHTML = html;
        }

        // æµ‹è¯•æ¨¡æ‹Ÿæ§åˆ¶
        function testStartSimulation() {
            try {
                if (typeof startSimulation === 'function') {
                    startSimulation();
                    updateStatus('simulation-status', 'âœ… å¯åŠ¨æ¨¡æ‹Ÿæµ‹è¯•æˆåŠŸ', 'success');
                } else {
                    updateStatus('simulation-status', 'âŒ startSimulation å‡½æ•°æœªå®šä¹‰', 'error');
                }
            } catch (error) {
                updateStatus('simulation-status', 'âŒ å¯åŠ¨æ¨¡æ‹Ÿæµ‹è¯•å¤±è´¥: ' + error.message, 'error');
            }
        }

        function testStopSimulation() {
            try {
                if (typeof stopSimulation === 'function') {
                    stopSimulation();
                    updateStatus('simulation-status', 'âœ… åœæ­¢æ¨¡æ‹Ÿæµ‹è¯•æˆåŠŸ', 'success');
                } else {
                    updateStatus('simulation-status', 'âŒ stopSimulation å‡½æ•°æœªå®šä¹‰', 'error');
                }
            } catch (error) {
                updateStatus('simulation-status', 'âŒ åœæ­¢æ¨¡æ‹Ÿæµ‹è¯•å¤±è´¥: ' + error.message, 'error');
            }
        }

        function testResetSimulation() {
            try {
                if (typeof resetSimulation === 'function') {
                    resetSimulation();
                    updateStatus('simulation-status', 'âœ… é‡ç½®æ¨¡æ‹Ÿæµ‹è¯•æˆåŠŸ', 'success');
                } else {
                    updateStatus('simulation-status', 'âŒ resetSimulation å‡½æ•°æœªå®šä¹‰', 'error');
                }
            } catch (error) {
                updateStatus('simulation-status', 'âŒ é‡ç½®æ¨¡æ‹Ÿæµ‹è¯•å¤±è´¥: ' + error.message, 'error');
            }
        }

        // æµ‹è¯•è¿æ¥çº¿æ§åˆ¶
        function testToggleConnections() {
            try {
                if (typeof toggleConnections === 'function') {
                    toggleConnections();
                    updateStatus('connection-status', 'âœ… åˆ‡æ¢è¿æ¥çº¿æµ‹è¯•æˆåŠŸ', 'success');
                } else {
                    updateStatus('connection-status', 'âŒ toggleConnections å‡½æ•°æœªå®šä¹‰', 'error');
                }
            } catch (error) {
                updateStatus('connection-status', 'âŒ åˆ‡æ¢è¿æ¥çº¿æµ‹è¯•å¤±è´¥: ' + error.message, 'error');
            }
        }

        function testToggleConnectionMode() {
            try {
                if (typeof toggleConnectionMode === 'function') {
                    toggleConnectionMode();
                    updateStatus('connection-status', 'âœ… åˆ‡æ¢è¿æ¥æ¨¡å¼æµ‹è¯•æˆåŠŸ', 'success');
                } else {
                    updateStatus('connection-status', 'âŒ toggleConnectionMode å‡½æ•°æœªå®šä¹‰', 'error');
                }
            } catch (error) {
                updateStatus('connection-status', 'âŒ åˆ‡æ¢è¿æ¥æ¨¡å¼æµ‹è¯•å¤±è´¥: ' + error.message, 'error');
            }
        }

        function testToggleAnchorPoints() {
            try {
                if (typeof toggleAnchorPoints === 'function') {
                    toggleAnchorPoints();
                    updateStatus('connection-status', 'âœ… åˆ‡æ¢é”šç‚¹æµ‹è¯•æˆåŠŸ', 'success');
                } else {
                    updateStatus('connection-status', 'âŒ toggleAnchorPoints å‡½æ•°æœªå®šä¹‰', 'error');
                }
            } catch (error) {
                updateStatus('connection-status', 'âŒ åˆ‡æ¢é”šç‚¹æµ‹è¯•å¤±è´¥: ' + error.message, 'error');
            }
        }

        // æ˜¾ç¤ºç³»ç»Ÿä¿¡æ¯
        function showSystemInfo() {
            const info = {
                'ç³»ç»Ÿå¯¹è±¡': typeof window.AICognitiveSystem,
                'è°ƒè¯•å¯¹è±¡': typeof window.debugAI,
                'ç”¨æˆ·ä»£ç†': navigator.userAgent.substring(0, 50) + '...',
                'è§†å£å¤§å°': `${window.innerWidth} x ${window.innerHeight}`,
                'æ—¶é—´æˆ³': new Date().toLocaleString()
            };
            
            let html = '<div class="function-list">';
            for (const [key, value] of Object.entries(info)) {
                html += `<div class="function-item available"><strong>${key}:</strong> ${value}</div>`;
            }
            html += '</div>';
            
            document.getElementById('system-info').innerHTML = html;
        }

        // å¼€å§‹ç›‘æ§
        function startMonitoring() {
            if (monitorInterval) {
                clearInterval(monitorInterval);
            }
            
            monitorInterval = setInterval(() => {
                const monitor = document.getElementById('monitor-info');
                const now = new Date().toLocaleString();
                const memUsage = performance.memory ? 
                    `${Math.round(performance.memory.usedJSHeapSize / 1024 / 1024)}MB` : 
                    'ä¸æ”¯æŒ';
                
                monitor.innerHTML = `
                    <div class="status info">
                        ğŸ•’ ${now}<br>
                        ğŸ’¾ å†…å­˜ä½¿ç”¨: ${memUsage}<br>
                        ğŸ”§ AICognitiveSystem: ${typeof window.AICognitiveSystem}<br>
                        ğŸ“Š æ¨¡å—æ•°é‡: ${document.querySelectorAll('.module').length}
                    </div>
                `;
            }, 1000);
            
            updateStatus('monitor-info', 'âœ… ç›‘æ§å·²å¯åŠ¨', 'success');
        }

        // åœæ­¢ç›‘æ§
        function stopMonitoring() {
            if (monitorInterval) {
                clearInterval(monitorInterval);
                monitorInterval = null;
                updateStatus('monitor-info', 'â¹ï¸ ç›‘æ§å·²åœæ­¢', 'info');
            }
        }

        // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
        function updateStatus(elementId, message, type) {
            const element = document.getElementById(elementId);
            element.className = `status ${type}`;
            element.textContent = message;
        }

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨æ£€æŸ¥
        setTimeout(() => {
            checkFunctions();
            showSystemInfo();
        }, 1000);
    </script>
</body>
</html> 