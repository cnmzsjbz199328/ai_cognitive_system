<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤šè¯­è¨€ç³»ç»Ÿæµ‹è¯• - AIè®¤çŸ¥ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .test-panel {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 350px;
            background: rgba(0, 0, 0, 0.85);
            color: white;
            padding: 20px;
            border-radius: 15px;
            font-family: monospace;
            font-size: 12px;
            z-index: 1000;
            max-height: 85vh;
            overflow-y: auto;
        }
        
        .test-title {
            color: #00ff88;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
            border-bottom: 2px solid #00ff88;
            padding-bottom: 8px;
            font-size: 14px;
        }
        
        .test-section {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }
        
        .test-button {
            margin: 5px 2px;
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            cursor: pointer;
            font-size: 11px;
            transition: all 0.3s ease;
            width: calc(50% - 4px);
            display: inline-block;
        }
        
        .test-button:hover {
            background: linear-gradient(135deg, #2980b9, #1abc9c);
            transform: translateY(-1px);
        }
        
        .test-button.active {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
        }
        
        .info-display {
            background: rgba(52, 152, 219, 0.1);
            border: 1px solid #3498db;
            border-radius: 6px;
            padding: 10px;
            margin: 10px 0;
            font-size: 11px;
            line-height: 1.4;
        }
        
        .current-lang {
            color: #f39c12;
            font-weight: bold;
        }
        
        .module-info {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .status-good {
            color: #2ecc71;
        }
        
        .status-warn {
            color: #f39c12;
        }
        
        .status-error {
            color: #e74c3c;
        }
        
        .quick-test {
            background: rgba(231, 76, 60, 0.1);
            border-left-color: #e74c3c;
        }
        
        .demo-controls {
            background: rgba(46, 204, 113, 0.1);
            border-left-color: #2ecc71;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="system-title">
            <h1>å¤šè¯­è¨€ç³»ç»Ÿæµ‹è¯• - AIè®¤çŸ¥ç³»ç»Ÿ</h1>
        </div>

        <svg class="connections-svg" id="connections-svg">
            <!-- è¿æ¥çº¿å°†åœ¨è¿™é‡ŒåŠ¨æ€ç»˜åˆ¶ -->
        </svg>

        <!-- ä½¿ç”¨æ ‡å‡†å¸ƒå±€ -->
        <div class="module" id="global-time" style="top: 80px; left: 50%; transform: translateX(-50%);">
            <div class="module-name">Global Time System<br>å…¨å±€æ—¶é—´ç³»ç»Ÿ</div>
        </div>

        <div class="module" id="external-stimuli" style="top: 180px; left: 100px;">
            <div class="module-name">External Stimuli<br>å¤–éƒ¨åˆºæ¿€</div>
        </div>

        <div class="module" id="perception" style="top: 180px; left: 350px;">
            <div class="module-name">Perception & Input<br>æ„ŸçŸ¥ä¸è¾“å…¥æ¨¡å—</div>
        </div>

        <div class="module" id="ai-cognitive" style="top: 180px; left: 600px;">
            <div class="module-name">AI Cognitive Core<br>AIè®¤çŸ¥æ ¸å¿ƒ</div>
        </div>

        <div class="module" id="thinking-core" style="top: 280px; left: 50%; transform: translateX(-50%);">
            <div class="module-name">Thinking Core<br>æ€ç»´æ ¸å¿ƒ</div>
        </div>

        <div class="module" id="personality" style="top: 380px; left: 80px;">
            <div class="module-name">Personality & Emotion<br>ä¸ªæ€§ä¸æƒ…æ„Ÿæ ¸å¿ƒ</div>
        </div>

        <div class="module" id="skills" style="top: 380px; left: 280px;">
            <div class="module-name">Skills Module<br>æŠ€èƒ½æ¨¡å—</div>
        </div>

        <div class="module" id="needs" style="top: 380px; left: 480px;">
            <div class="module-name">Needs & Motivation<br>éœ€æ±‚ä¸åŠ¨æœºç³»ç»Ÿ</div>
        </div>

        <div class="module" id="planning" style="top: 380px; left: 680px;">
            <div class="module-name">Planning System<br>è§„åˆ’ç³»ç»Ÿ</div>
        </div>

        <div class="module" id="relationship" style="top: 380px; left: 880px;">
            <div class="module-name">Relationship Module<br>å…³ç³»æ¨¡å—</div>
        </div>

        <div class="module" id="action-output" style="top: 480px; left: 50%; transform: translateX(-50%);">
            <div class="module-name">Action & Output<br>è¡ŒåŠ¨ä¸è¾“å‡ºæ¨¡å—</div>
        </div>

        <div class="module" id="environment" style="top: 580px; left: 300px;">
            <div class="module-name">Environment Interaction<br>ç¯å¢ƒäº¤äº’æ¨¡å—</div>
        </div>

        <div class="module" id="memory" style="top: 580px; left: 650px;">
            <div class="module-name">Memory System<br>è®°å¿†ç³»ç»Ÿ</div>
        </div>

        <div class="connection-hint">
            <strong>ğŸ’¡ æ“ä½œæç¤ºï¼š</strong><br>
            â€¢ æ‹–æ‹½æ¨¡å—æ”¹å˜ä½ç½®<br>
            â€¢ è¿æ¥çº¿ä¼šè‡ªåŠ¨æ›´æ–°<br>
            â€¢ åˆ‡æ¢è¿æ¥çº¿æ˜¾ç¤º/éšè—
        </div>

        <div class="info-panel">
            <div class="info-title">å½“å‰æ´»åŠ¨æ¨¡å—</div>
            <div class="info-content" id="current-info">
                ç‚¹å‡»"å¼€å§‹æ¨¡æ‹Ÿ"æŒ‰é’®å¼€å§‹ä¿¡æ¯ä¼ å¯¼æ¼”ç¤º
            </div>
        </div>

        <div class="control-panel">
            <button class="btn btn-primary" onclick="startSimulation()">å¼€å§‹æ¨¡æ‹Ÿ</button>
            <button class="btn btn-secondary" onclick="stopSimulation()">åœæ­¢æ¨¡æ‹Ÿ</button>
            <button class="btn btn-secondary" onclick="resetSimulation()">é‡ç½®</button>
            <button class="btn btn-toggle" id="connections-toggle" onclick="toggleConnections()">éšè—è¿æ¥çº¿</button>
            <div class="speed-control">
                <span>æ¨¡æ‹Ÿé€Ÿåº¦:</span>
                <input type="range" class="speed-slider" min="500" max="3000" value="1500" id="speed-slider">
            </div>
            <div class="control-hint">
                æœªå¯åŠ¨çŠ¶æ€ä¸‹å¯ä»¥æ‹–åŠ¨æ¨¡å—
            </div>
        </div>
    </div>

    <!-- æµ‹è¯•é¢æ¿ -->
    <div class="test-panel">
        <div class="test-title">ğŸŒ å¤šè¯­è¨€ç³»ç»Ÿæµ‹è¯•</div>
        
        <div class="test-section">
            <h3>ğŸ“Š å½“å‰çŠ¶æ€</h3>
            <div class="info-display">
                <div>å½“å‰è¯­è¨€: <span class="current-lang" id="current-lang-display">zh-CN</span></div>
                <div>æ´»åŠ¨æ¨¡å—: <span class="module-info" id="active-module-display">æ— </span></div>
                <div>ä¿¡æ¯é¢æ¿: <span id="info-panel-text">--</span></div>
            </div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ”„ è¯­è¨€åˆ‡æ¢æµ‹è¯•</h3>
            <button class="test-button" onclick="testLanguageSwitch('zh-CN')">ç®€ä½“ä¸­æ–‡</button>
            <button class="test-button" onclick="testLanguageSwitch('zh-TW')">ç¹é«”ä¸­æ–‡</button>
            <button class="test-button" onclick="testLanguageSwitch('en')">English</button>
            <button class="test-button" onclick="testLanguageSwitch('ja')">æ—¥æœ¬èª</button>
        </div>
        
        <div class="test-section quick-test">
            <h3>âš¡ å¿«é€Ÿæµ‹è¯•</h3>
            <button class="test-button" onclick="activateModuleTest('external-stimuli')">æ¿€æ´»å¤–éƒ¨åˆºæ¿€</button>
            <button class="test-button" onclick="activateModuleTest('ai-cognitive')">æ¿€æ´»AIæ ¸å¿ƒ</button>
            <button class="test-button" onclick="activateModuleTest('memory')">æ¿€æ´»è®°å¿†ç³»ç»Ÿ</button>
            <button class="test-button" onclick="activateModuleTest('action-output')">æ¿€æ´»è¾“å‡ºæ¨¡å—</button>
        </div>
        
        <div class="test-section demo-controls">
            <h3>ğŸ¬ æ¼”ç¤ºæ§åˆ¶</h3>
            <button class="test-button" onclick="startFullDemo()">å®Œæ•´æ¼”ç¤º</button>
            <button class="test-button" onclick="stopDemo()">åœæ­¢æ¼”ç¤º</button>
            <button class="test-button" onclick="resetAll()">é‡ç½®ç³»ç»Ÿ</button>
            <button class="test-button" onclick="runLanguageTest()">è¯­è¨€æµ‹è¯•</button>
        </div>
        
        <div class="test-section">
            <h3>ğŸ“‹ æµ‹è¯•ç»“æœ</h3>
            <div id="test-results" class="info-display">
                ç­‰å¾…æµ‹è¯•...
            </div>
        </div>
    </div>

    <script type="module" src="js/main.js"></script>
    
    <script type="module">
        import { switchLanguage, languages } from './js/language.js';
        import { getCurrentLanguage } from './js/config.js';
        import { activateModule, startSimulation, stopSimulation, resetSimulation } from './js/simulation.js';

        // æš´éœ²æµ‹è¯•å‡½æ•°åˆ°å…¨å±€
        window.startSimulation = startSimulation;
        window.stopSimulation = stopSimulation;
        window.resetSimulation = resetSimulation;
        
        let testResults = [];

        // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
        function updateStatusDisplay() {
            const currentLang = getCurrentLanguage();
            const activeModule = document.querySelector('.module.active');
            const infoText = document.getElementById('current-info').textContent;
            
            document.getElementById('current-lang-display').textContent = currentLang;
            document.getElementById('active-module-display').textContent = activeModule ? activeModule.id : 'æ— ';
            document.getElementById('info-panel-text').textContent = infoText.substring(0, 30) + '...';
        }

        // æµ‹è¯•è¯­è¨€åˆ‡æ¢
        window.testLanguageSwitch = function(lang) {
            console.log(`ğŸŒ æµ‹è¯•åˆ‡æ¢åˆ°: ${lang}`);
            switchLanguage(lang);
            
            setTimeout(() => {
                updateStatusDisplay();
                
                const langData = languages[lang];
                const result = `âœ… åˆ‡æ¢åˆ° ${langData.name} æˆåŠŸ`;
                addTestResult(result);
            }, 100);
        };

        // æ¿€æ´»æ¨¡å—æµ‹è¯•
        window.activateModuleTest = function(moduleId) {
            console.log(`ğŸ¯ æµ‹è¯•æ¿€æ´»æ¨¡å—: ${moduleId}`);
            activateModule(moduleId);
            
            setTimeout(() => {
                updateStatusDisplay();
                
                const activeModule = document.querySelector('.module.active');
                const infoText = document.getElementById('current-info').textContent;
                const currentLang = getCurrentLanguage();
                
                let result;
                if (activeModule && activeModule.id === moduleId) {
                    result = `âœ… æ¨¡å— ${moduleId} æ¿€æ´»æˆåŠŸ (${currentLang})`;
                    result += `\nğŸ“„ æè¿°: ${infoText.substring(0, 50)}...`;
                } else {
                    result = `âŒ æ¨¡å— ${moduleId} æ¿€æ´»å¤±è´¥`;
                }
                
                addTestResult(result);
            }, 100);
        };

        // å®Œæ•´æ¼”ç¤º
        window.startFullDemo = function() {
            console.log('ğŸ¬ å¼€å§‹å®Œæ•´æ¼”ç¤º');
            startSimulation();
            addTestResult('ğŸ¬ å®Œæ•´æ¼”ç¤ºå·²å¯åŠ¨');
            
            setTimeout(() => {
                updateStatusDisplay();
            }, 1000);
        };

        // åœæ­¢æ¼”ç¤º
        window.stopDemo = function() {
            console.log('â¹ï¸ åœæ­¢æ¼”ç¤º');
            stopSimulation();
            addTestResult('â¹ï¸ æ¼”ç¤ºå·²åœæ­¢');
            
            setTimeout(() => {
                updateStatusDisplay();
            }, 100);
        };

        // é‡ç½®ç³»ç»Ÿ
        window.resetAll = function() {
            console.log('ğŸ”„ é‡ç½®ç³»ç»Ÿ');
            resetSimulation();
            addTestResult('ğŸ”„ ç³»ç»Ÿå·²é‡ç½®');
            
            setTimeout(() => {
                updateStatusDisplay();
            }, 100);
        };

        // è¿è¡Œå®Œæ•´çš„è¯­è¨€æµ‹è¯•
        window.runLanguageTest = function() {
            console.log('ğŸ§ª è¿è¡Œå®Œæ•´è¯­è¨€æµ‹è¯•');
            addTestResult('ğŸ§ª å¼€å§‹å®Œæ•´è¯­è¨€æµ‹è¯•...');
            
            const testModules = ['external-stimuli', 'ai-cognitive', 'memory'];
            const testLanguages = ['zh-CN', 'en', 'ja', 'zh-TW'];
            let testIndex = 0;
            
            function runNextTest() {
                if (testIndex >= testLanguages.length) {
                    addTestResult('âœ… å®Œæ•´è¯­è¨€æµ‹è¯•å®Œæˆ');
                    return;
                }
                
                const lang = testLanguages[testIndex];
                console.log(`æµ‹è¯•è¯­è¨€: ${lang}`);
                
                // åˆ‡æ¢è¯­è¨€
                switchLanguage(lang);
                
                setTimeout(() => {
                    // æ¿€æ´»ä¸€ä¸ªæ¨¡å—
                    const moduleId = testModules[testIndex % testModules.length];
                    activateModule(moduleId);
                    
                    setTimeout(() => {
                        const infoText = document.getElementById('current-info').textContent;
                        const langData = languages[lang];
                        
                        if (infoText && infoText !== 'æœªçŸ¥æ¨¡å—') {
                            addTestResult(`âœ… ${langData.name}: æ¨¡å—æè¿°æ­£å¸¸`);
                        } else {
                            addTestResult(`âŒ ${langData.name}: æ¨¡å—æè¿°å¼‚å¸¸`);
                        }
                        
                        testIndex++;
                        setTimeout(runNextTest, 800);
                    }, 300);
                }, 300);
            }
            
            runNextTest();
        };

        // æ·»åŠ æµ‹è¯•ç»“æœ
        function addTestResult(result) {
            testResults.push(`[${new Date().toLocaleTimeString()}] ${result}`);
            
            // ä¿æŒæœ€è¿‘20æ¡ç»“æœ
            if (testResults.length > 20) {
                testResults.shift();
            }
            
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = testResults.map(r => `<div>${r}</div>`).join('');
            resultsDiv.scrollTop = resultsDiv.scrollHeight;
        }

        // åˆå§‹åŒ–
        setTimeout(() => {
            updateStatusDisplay();
            addTestResult('ğŸš€ å¤šè¯­è¨€æµ‹è¯•ç³»ç»Ÿå·²å°±ç»ª');
        }, 500);

        // å®šæœŸæ›´æ–°çŠ¶æ€
        setInterval(updateStatusDisplay, 2000);
    </script>
</body>
</html> 