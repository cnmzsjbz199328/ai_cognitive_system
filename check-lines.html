<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>è¿æ¥çº¿å¯è§æ€§æ£€æŸ¥å·¥å…·</title>
    <style>
        body { 
            margin: 20px; 
            font-family: Arial, sans-serif; 
            line-height: 1.6;
        }
        .check-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background: #f9f9f9;
        }
        .result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        button { 
            padding: 10px 20px; 
            margin: 5px; 
            font-size: 14px; 
            cursor: pointer;
            border: none;
            border-radius: 5px;
            background: #007bff;
            color: white;
        }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <h1>ğŸ” è¿æ¥çº¿å¯è§æ€§æ£€æŸ¥å·¥å…·</h1>
    
    <div class="check-section">
        <h2>1. æµè§ˆå™¨åŸºç¡€æ£€æŸ¥</h2>
        <button onclick="checkBrowser()">æ£€æŸ¥æµè§ˆå™¨æ”¯æŒ</button>
        <div id="browser-result"></div>
    </div>
    
    <div class="check-section">
        <h2>2. SVGåŸºç¡€åŠŸèƒ½æ£€æŸ¥</h2>
        <button onclick="checkSVG()">æµ‹è¯•SVGç»˜åˆ¶</button>
        <div id="svg-test-container" style="margin: 10px 0;">
            <svg width="300" height="100" style="border: 1px solid #333;" id="test-svg">
                <!-- æµ‹è¯•çº¿æ¡å°†åœ¨è¿™é‡Œç»˜åˆ¶ -->
            </svg>
        </div>
        <div id="svg-result"></div>
    </div>
    
    <div class="check-section">
        <h2>3. CSSå†²çªæ£€æŸ¥</h2>
        <button onclick="checkCSS()">æ£€æŸ¥æ ·å¼å†²çª</button>
        <div id="css-result"></div>
    </div>
    
    <div class="check-section">
        <h2>4. æ¨¡æ‹Ÿä¸»é¡¹ç›®ç¯å¢ƒæµ‹è¯•</h2>
        <button onclick="testMainProject()">æ¨¡æ‹Ÿä¸»é¡¹ç›®è¿æ¥çº¿</button>
        <div style="position: relative; width: 600px; height: 400px; border: 2px solid #000; margin: 10px 0; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);" id="main-test">
            <svg style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 15; pointer-events: none;" id="main-svg" xmlns="http://www.w3.org/2000/svg">
            </svg>
            <div style="position: absolute; top: 50px; left: 50px; background: rgba(255,255,255,0.9); padding: 10px; border-radius: 10px; backdrop-filter: blur(10px);" id="module1">æ¨¡å—1</div>
            <div style="position: absolute; top: 50px; right: 50px; background: rgba(255,255,255,0.9); padding: 10px; border-radius: 10px; backdrop-filter: blur(10px);" id="module2">æ¨¡å—2</div>
            <div style="position: absolute; bottom: 50px; left: 200px; background: rgba(255,255,255,0.9); padding: 10px; border-radius: 10px; backdrop-filter: blur(10px);" id="module3">æ¨¡å—3</div>
        </div>
        <div id="main-result"></div>
    </div>
    
    <div class="check-section">
        <h2>5. è§£å†³æ–¹æ¡ˆå»ºè®®</h2>
        <div id="solutions">
            <h3>å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆï¼š</h3>
            <ul>
                <li><strong>SVGä¸æ˜¾ç¤ºï¼š</strong> æ£€æŸ¥CSS z-indexè®¾ç½®</li>
                <li><strong>åæ ‡é”™è¯¯ï¼š</strong> éªŒè¯getBoundingClientRect()è®¡ç®—</li>
                <li><strong>backdrop-filterå†²çªï¼š</strong> ç§»é™¤æˆ–è°ƒæ•´SVGçš„backdrop-filter</li>
                <li><strong>æµè§ˆå™¨å…¼å®¹æ€§ï¼š</strong> ç¡®ä¿ä½¿ç”¨ç°ä»£æµè§ˆå™¨</li>
            </ul>
        </div>
    </div>

    <script>
        function checkBrowser() {
            const result = document.getElementById('browser-result');
            let html = '<h3>æµè§ˆå™¨å…¼å®¹æ€§æ£€æŸ¥ï¼š</h3>';
            
            // æ£€æŸ¥SVGæ”¯æŒ
            const svgSupported = document.createElementNS && document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGRect;
            html += `<div class="${svgSupported ? 'success' : 'error'}">SVGæ”¯æŒ: ${svgSupported ? 'âœ“ æ”¯æŒ' : 'âœ— ä¸æ”¯æŒ'}</div>`;
            
            // æ£€æŸ¥getBoundingClientRectæ”¯æŒ
            const rectSupported = 'getBoundingClientRect' in document.createElement('div');
            html += `<div class="${rectSupported ? 'success' : 'error'}">getBoundingClientRectæ”¯æŒ: ${rectSupported ? 'âœ“ æ”¯æŒ' : 'âœ— ä¸æ”¯æŒ'}</div>`;
            
            // æ£€æŸ¥backdrop-filteræ”¯æŒ
            const backdropSupported = CSS.supports('backdrop-filter', 'blur(10px)');
            html += `<div class="${backdropSupported ? 'success' : 'warning'}">backdrop-filteræ”¯æŒ: ${backdropSupported ? 'âœ“ æ”¯æŒ' : 'âš  ä¸æ”¯æŒ'}</div>`;
            
            html += `<div class="result">æµè§ˆå™¨: ${navigator.userAgent}</div>`;
            
            result.innerHTML = html;
        }
        
        function checkSVG() {
            const result = document.getElementById('svg-result');
            const svg = document.getElementById('test-svg');
            
            try {
                // æ¸…é™¤ç°æœ‰å†…å®¹
                svg.innerHTML = '';
                
                // åˆ›å»ºæµ‹è¯•çº¿æ¡
                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line.setAttribute('x1', '10');
                line.setAttribute('y1', '10');
                line.setAttribute('x2', '290');
                line.setAttribute('y2', '90');
                line.setAttribute('stroke', 'red');
                line.setAttribute('stroke-width', '3');
                
                svg.appendChild(line);
                
                // åˆ›å»ºç¬¬äºŒæ¡çº¿
                const line2 = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line2.setAttribute('x1', '10');
                line2.setAttribute('y1', '90');
                line2.setAttribute('x2', '290');
                line2.setAttribute('y2', '10');
                line2.setAttribute('stroke', 'blue');
                line2.setAttribute('stroke-width', '3');
                
                svg.appendChild(line2);
                
                result.innerHTML = `<div class="success">âœ“ SVGçº¿æ¡ç»˜åˆ¶æˆåŠŸï¼å¦‚æœä½ èƒ½çœ‹åˆ°ä¸Šæ–¹çš„çº¢è“äº¤å‰çº¿ï¼Œè¯´æ˜SVGåŠŸèƒ½æ­£å¸¸ã€‚SVGå­å…ƒç´ æ•°é‡: ${svg.children.length}</div>`;
                
            } catch (error) {
                result.innerHTML = `<div class="error">âœ— SVGç»˜åˆ¶å¤±è´¥: ${error.message}</div>`;
            }
        }
        
        function checkCSS() {
            const result = document.getElementById('css-result');
            let html = '<h3>CSSæ ·å¼æ£€æŸ¥ï¼š</h3>';
            
            // æ£€æŸ¥z-indexå±‚çº§
            const testEl = document.createElement('div');
            testEl.style.zIndex = '15';
            document.body.appendChild(testEl);
            const computedZIndex = window.getComputedStyle(testEl).zIndex;
            document.body.removeChild(testEl);
            
            html += `<div class="${computedZIndex === '15' ? 'success' : 'error'}">z-indexè®¾ç½®: ${computedZIndex === '15' ? 'âœ“ æ­£å¸¸' : 'âœ— å¼‚å¸¸'}</div>`;
            
            // æ£€æŸ¥positionæ”¯æŒ
            const positionSupported = CSS.supports('position', 'absolute');
            html += `<div class="${positionSupported ? 'success' : 'error'}">position:absoluteæ”¯æŒ: ${positionSupported ? 'âœ“ æ”¯æŒ' : 'âœ— ä¸æ”¯æŒ'}</div>`;
            
            result.innerHTML = html;
        }
        
        function testMainProject() {
            const result = document.getElementById('main-result');
            const svg = document.getElementById('main-svg');
            const container = document.getElementById('main-test');
            
            try {
                svg.innerHTML = '';
                
                const modules = ['module1', 'module2', 'module3'];
                const connections = [
                    ['module1', 'module2'],
                    ['module2', 'module3'],
                    ['module3', 'module1']
                ];
                
                let html = '<h3>ä¸»é¡¹ç›®ç¯å¢ƒæµ‹è¯•ç»“æœï¼š</h3>';
                let successCount = 0;
                
                connections.forEach(([from, to], index) => {
                    const fromEl = document.getElementById(from);
                    const toEl = document.getElementById(to);
                    
                    if (!fromEl || !toEl) {
                        html += `<div class="error">âœ— æ‰¾ä¸åˆ°æ¨¡å—: ${from} æˆ– ${to}</div>`;
                        return;
                    }
                    
                    const fromRect = fromEl.getBoundingClientRect();
                    const toRect = toEl.getBoundingClientRect();
                    const containerRect = container.getBoundingClientRect();
                    
                    const fromX = fromRect.left - containerRect.left + fromRect.width / 2;
                    const fromY = fromRect.top - containerRect.top + fromRect.height / 2;
                    const toX = toRect.left - containerRect.left + toRect.width / 2;
                    const toY = toRect.top - containerRect.top + toRect.height / 2;
                    
                    html += `<div class="result">è¿æ¥ ${from} -> ${to}: (${Math.round(fromX)}, ${Math.round(fromY)}) -> (${Math.round(toX)}, ${Math.round(toY)})</div>`;
                    
                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', fromX);
                    line.setAttribute('y1', fromY);
                    line.setAttribute('x2', toX);
                    line.setAttribute('y2', toY);
                    line.setAttribute('stroke', '#fff');
                    line.setAttribute('stroke-width', '4');
                    line.setAttribute('opacity', '0.8');
                    line.setAttribute('stroke-dasharray', '5,5');
                    
                    svg.appendChild(line);
                    successCount++;
                });
                
                html += `<div class="${successCount === connections.length ? 'success' : 'warning'}">ç»˜åˆ¶ç»“æœ: ${successCount}/${connections.length} æ¡è¿æ¥çº¿ï¼ŒSVGå­å…ƒç´ : ${svg.children.length}</div>`;
                
                if (successCount === connections.length) {
                    html += `<div class="success">âœ“ å¦‚æœä½ èƒ½çœ‹åˆ°ä¸Šæ–¹ç™½è‰²è™šçº¿è¿æ¥æ¨¡å—ï¼Œè¯´æ˜è¿æ¥çº¿åŠŸèƒ½å®Œå…¨æ­£å¸¸ï¼</div>`;
                } else {
                    html += `<div class="error">âœ— è¿æ¥çº¿ç»˜åˆ¶ä¸å®Œæ•´ï¼Œè¯·æ£€æŸ¥æ¨¡å—ä½ç½®å’Œåæ ‡è®¡ç®—</div>`;
                }
                
                result.innerHTML = html;
                
            } catch (error) {
                result.innerHTML = `<div class="error">âœ— æµ‹è¯•å¤±è´¥: ${error.message}</div>`;
            }
        }
        
        // é¡µé¢åŠ è½½åè‡ªåŠ¨è¿è¡ŒåŸºç¡€æ£€æŸ¥
        window.addEventListener('load', function() {
            setTimeout(() => {
                checkBrowser();
                checkSVG();
            }, 500);
        });
    </script>
</body>
</html> 