<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIè®¤çŸ¥ç³»ç»Ÿ - ä¿®å¤æµ‹è¯•</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* é¢å¤–çš„è°ƒè¯•æ ·å¼ */
        .debug-info {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            z-index: 1000;
            max-width: 300px;
        }
        
        .test-results {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0,128,0,0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 14px;
            z-index: 1000;
        }
        
        .error-info {
            background: rgba(128,0,0,0.8) !important;
        }
    </style>
</head>
<body>
    <div class="debug-info" id="debug-info">
        <div>ğŸ”§ è°ƒè¯•ä¿¡æ¯</div>
        <div id="status">æ­£åœ¨åŠ è½½...</div>
        <div id="modules-count">æ¨¡å—æ•°é‡: -</div>
        <div id="connections-count">è¿æ¥çº¿æ•°é‡: -</div>
        <div id="errors">é”™è¯¯: æ— </div>
    </div>
    
    <div class="test-results" id="test-results">
        <div>ğŸ§ª æµ‹è¯•ç»“æœ</div>
        <div id="test-status">ç­‰å¾…æµ‹è¯•...</div>
    </div>

    <div class="container">
        <div class="system-title">
            <h1>AIè®¤çŸ¥ç³»ç»Ÿ - ä¿®å¤æµ‹è¯•ç‰ˆ</h1>
        </div>

        <svg class="connections-svg" id="connections-svg">
            <!-- è¿æ¥çº¿å°†åœ¨è¿™é‡ŒåŠ¨æ€ç»˜åˆ¶ -->
        </svg>

        <!-- ç®€åŒ–çš„æ¨¡å—å¸ƒå±€ -->
        <div class="module" id="external-stimuli" style="top: 100px; left: 100px;">
            <div class="module-name">External Stimuli<br>å¤–éƒ¨åˆºæ¿€</div>
        </div>

        <div class="module" id="perception" style="top: 100px; left: 300px;">
            <div class="module-name">Perception<br>æ„ŸçŸ¥æ¨¡å—</div>
        </div>

        <div class="module" id="ai-cognitive" style="top: 200px; left: 200px;">
            <div class="module-name">AI Core<br>AIæ ¸å¿ƒ</div>
        </div>
        
        <div class="module" id="thinking-core" style="top: 300px; left: 200px;">
            <div class="module-name">Thinking<br>æ€ç»´æ ¸å¿ƒ</div>
        </div>

        <div class="module" id="action-output" style="top: 400px; left: 200px;">
            <div class="module-name">Output<br>è¾“å‡ºæ¨¡å—</div>
        </div>

        <div class="info-panel">
            <div class="info-title">å½“å‰çŠ¶æ€</div>
            <div class="info-content" id="current-info">
                æµ‹è¯•ç³»ç»Ÿå°±ç»ª
            </div>
        </div>

        <div class="control-panel">
            <button class="btn btn-primary" onclick="testStartSimulation()">ğŸš€ æµ‹è¯•å¯åŠ¨</button>
            <button class="btn btn-secondary" onclick="testStopSimulation()">â¹ï¸ æµ‹è¯•åœæ­¢</button>
            <button class="btn btn-secondary" onclick="testResetSimulation()">ğŸ”„ æµ‹è¯•é‡ç½®</button>
            <button class="btn btn-toggle" onclick="testToggleConnections()">ğŸ”— åˆ‡æ¢è¿æ¥çº¿</button>
            <button class="btn btn-secondary" onclick="runFullTest()">ğŸ§ª è¿è¡Œå®Œæ•´æµ‹è¯•</button>
            <div class="control-hint">
                ä¿®å¤åçš„ç³»ç»Ÿæµ‹è¯•
            </div>
        </div>
    </div>

    <!-- æµ‹è¯•è„šæœ¬ -->
    <script type="module">
        let testResults = {
            moduleLoad: false,
            connectionsDrawn: false,
            buttonsResponsive: false,
            noErrors: true
        };
        
        // æµ‹è¯•å‡½æ•°
        window.testStartSimulation = function() {
            try {
                if (window.AICognitiveSystem && window.AICognitiveSystem.startSimulation) {
                    window.AICognitiveSystem.startSimulation();
                    updateTestResult('buttonsResponsive', true);
                    updateDebugInfo('âœ… å¯åŠ¨æŒ‰é’®å“åº”æ­£å¸¸');
                } else {
                    throw new Error('AICognitiveSystem.startSimulation ä¸å­˜åœ¨');
                }
            } catch (error) {
                updateTestResult('buttonsResponsive', false);
                updateDebugInfo('âŒ å¯åŠ¨æŒ‰é’®é”™è¯¯: ' + error.message);
            }
        };
        
        window.testStopSimulation = function() {
            try {
                if (window.AICognitiveSystem && window.AICognitiveSystem.stopSimulation) {
                    window.AICognitiveSystem.stopSimulation();
                    updateDebugInfo('âœ… åœæ­¢æŒ‰é’®å“åº”æ­£å¸¸');
                } else {
                    throw new Error('AICognitiveSystem.stopSimulation ä¸å­˜åœ¨');
                }
            } catch (error) {
                updateDebugInfo('âŒ åœæ­¢æŒ‰é’®é”™è¯¯: ' + error.message);
            }
        };
        
        window.testResetSimulation = function() {
            try {
                if (window.AICognitiveSystem && window.AICognitiveSystem.resetSimulation) {
                    window.AICognitiveSystem.resetSimulation();
                    updateDebugInfo('âœ… é‡ç½®æŒ‰é’®å“åº”æ­£å¸¸');
                } else {
                    throw new Error('AICognitiveSystem.resetSimulation ä¸å­˜åœ¨');
                }
            } catch (error) {
                updateDebugInfo('âŒ é‡ç½®æŒ‰é’®é”™è¯¯: ' + error.message);
            }
        };
        
        window.testToggleConnections = function() {
            try {
                if (window.AICognitiveSystem && window.AICognitiveSystem.toggleConnections) {
                    window.AICognitiveSystem.toggleConnections();
                    updateDebugInfo('âœ… è¿æ¥çº¿åˆ‡æ¢å“åº”æ­£å¸¸');
                } else {
                    throw new Error('AICognitiveSystem.toggleConnections ä¸å­˜åœ¨');
                }
            } catch (error) {
                updateDebugInfo('âŒ è¿æ¥çº¿åˆ‡æ¢é”™è¯¯: ' + error.message);
            }
        };
        
        window.runFullTest = function() {
            updateDebugInfo('ğŸ§ª è¿è¡Œå®Œæ•´æµ‹è¯•...');
            
            setTimeout(() => {
                checkModules();
                checkConnections();
                checkAPI();
                showFinalResults();
            }, 500);
        };
        
        function checkModules() {
            const modules = document.querySelectorAll('.module');
            updateTestResult('moduleLoad', modules.length > 0);
            updateDebugInfo(`æ¨¡å—æ•°é‡: ${modules.length}`);
        }
        
        function checkConnections() {
            const connections = document.querySelectorAll('.connection-line');
            updateTestResult('connectionsDrawn', connections.length > 0);
            updateDebugInfo(`è¿æ¥çº¿æ•°é‡: ${connections.length}`);
        }
        
        function checkAPI() {
            const hasAPI = window.AICognitiveSystem && 
                          typeof window.AICognitiveSystem.startSimulation === 'function';
            updateTestResult('buttonsResponsive', hasAPI);
            updateDebugInfo(`APIå¯ç”¨: ${hasAPI ? 'æ˜¯' : 'å¦'}`);
        }
        
        function updateTestResult(test, passed) {
            testResults[test] = passed;
            updateDebugInfo(`${test}: ${passed ? 'âœ…' : 'âŒ'}`);
        }
        
        function updateDebugInfo(message) {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = message;
            
            const errorsDiv = document.getElementById('errors');
            if (message.includes('âŒ')) {
                errorsDiv.innerHTML = message;
                document.getElementById('debug-info').classList.add('error-info');
                testResults.noErrors = false;
            }
        }
        
        function showFinalResults() {
            const passed = Object.values(testResults).every(result => result === true);
            const resultDiv = document.getElementById('test-status');
            
            if (passed) {
                resultDiv.innerHTML = 'ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼<br>ç³»ç»Ÿä¿®å¤æˆåŠŸ';
                resultDiv.style.color = '#00ff00';
            } else {
                resultDiv.innerHTML = 'âš ï¸ éƒ¨åˆ†æµ‹è¯•å¤±è´¥<br>éœ€è¦è¿›ä¸€æ­¥è°ƒè¯•';
                resultDiv.style.color = '#ffff00';
            }
        }
        
        // å¯¼å…¥ä¸»ç³»ç»Ÿ
        try {
            const { initializeSystem } = await import('./js/main.js');
            
            updateDebugInfo('âœ… æ¨¡å—åŠ è½½æˆåŠŸ');
            updateTestResult('moduleLoad', true);
            
            // ç­‰å¾…åˆå§‹åŒ–å®Œæˆ
            setTimeout(() => {
                checkConnections();
                checkAPI();
            }, 1000);
            
        } catch (error) {
            updateDebugInfo('âŒ æ¨¡å—åŠ è½½å¤±è´¥: ' + error.message);
            updateTestResult('moduleLoad', false);
            updateTestResult('noErrors', false);
            console.error('Module loading error:', error);
        }
        
        // é”™è¯¯æ•è·
        window.addEventListener('error', function(e) {
            updateDebugInfo('âŒ å…¨å±€é”™è¯¯: ' + e.message);
            updateTestResult('noErrors', false);
        });
        
        // å®šæœŸæ›´æ–°æ¨¡å—å’Œè¿æ¥çº¿è®¡æ•°
        setInterval(() => {
            const modulesCount = document.querySelectorAll('.module').length;
            const connectionsCount = document.querySelectorAll('.connection-line').length;
            
            document.getElementById('modules-count').textContent = `æ¨¡å—æ•°é‡: ${modulesCount}`;
            document.getElementById('connections-count').textContent = `è¿æ¥çº¿æ•°é‡: ${connectionsCount}`;
        }, 1000);
    </script>
</body>
</html> 